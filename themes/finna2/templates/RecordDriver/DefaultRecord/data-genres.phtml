<?php //Don't add START and END comments ?>
<?php if (!empty($data)): ?>
  <div class="truncate-field">
    <?php foreach ($data as $field): ?>
    <div class="subjectLine">
      <?php $subject = ''; ?>
      <?php if (is_array($field) && count($field) === 1) {
        $field = explode('--', reset($field));
      } ?>
      <?php $i = 0;
      foreach ((array)$field as $subfield): ?>
        <?=($i++ == 0) ? '' : ' &&#8594; '?>
        <?php $subject = trim($subject . ' ' . $subfield); ?>
        <a class="backlink" title="<?=$this->escapeHtmlAttr($subject)?>" href="<?=$this->record($this->driver)->getLink('subject', $subject)?>"><?=trim($this->transEsc($subfield))?></a>
      <?php endforeach; ?>
    </div>
    <?php endforeach; ?>
  </div>
<?php endif; ?>
